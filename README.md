# Shopify Vue Theme Development

Professional Shopify theme development skeleton with Vue 3, Vite, and Tailwind CSS v4.

## Structure

```
/
├── src/                    # Modern source code (Vite input)
│   ├── main.js            # Vue initialization and component mounting
│   ├── components/        # Vue SFC components
│   ├── styles/            # Tailwind CSS and global styles
│   └── utils/             # Shopify API helpers
├── shopify/               # ALL Shopify theme files (CLI target)
│   ├── assets/           # Vite builds here: main.js, main.css
│   ├── config/
│   ├── layout/
│   ├── locales/
│   ├── sections/
│   ├── snippets/
│   └── templates/
└── [config files]         # Vite, Tailwind, PostCSS configs
```

## Setup

1. **Install dependencies:**
   ```bash
   npm install
   ```

2. **Integrate Vite assets in theme.liquid:**
   Update `/shopify/layout/theme.liquid` to load the Vite-built assets:
   ```liquid
   <!-- In <head> -->
   {{ 'main.css' | asset_url | stylesheet_tag }}

   <!-- Before </body> -->
   <script src="{{ 'main.js' | asset_url }}" defer></script>
   ```

## Development

1. **Start Vite dev server** (in terminal 1):
   ```bash
   npm run dev
   ```

2. **Start Shopify theme server** (in terminal 2):
   ```bash
   npm run shopify:dev
   ```
   Or manually:
   ```bash
   shopify theme dev --path=shopify
   ```

3. **Access your store:**
   - Open the URL provided by `shopify theme dev`
   - Vite HMR will work for Vue components and styles

## Building

Build for production:
```bash
npm run build
```

This compiles `src/main.js` → `shopify/assets/main.js` and `src/styles/app.css` → `shopify/assets/main.css`.

## Deployment

Deploy to Shopify:
```bash
npm run deploy
```

Or manually:
```bash
npm run build
shopify theme push --path=shopify
```

## Tailwind CSS

**CRITICAL:** All Tailwind classes use the `tw-` prefix to avoid conflicts with Shopify/Dawn styles.

Example:
```html
<div class="tw-bg-blue-500 tw-text-white tw-p-4">
  Content
</div>
```

## Vue Components

### Creating a component

1. Create a `.vue` file in `src/components/`
2. Register it in `src/main.js`:
   ```js
   import MyComponent from './components/MyComponent.vue';
   const components = {
     'my-component': MyComponent,
   };
   ```

### Using in Liquid

Mount Vue components using `data-vue-mount`:

```liquid
<div
  data-vue-mount="add-to-cart"
  data-props='{"productId": {{ product.id }}, "variantId": {{ variant.id }}}'
>
  <!-- Fallback content if JS disabled -->
</div>
```

Or use the helper snippet:
```liquid
{% render 'vue-mount-snippet',
  component: 'add-to-cart',
  props: product_json
%}
```

### Passing Shopify data to Vue

Serialize Shopify objects to JSON in Liquid, then parse in Vue:

```liquid
{% capture product_data %}
{
  "id": {{ product.id | json }},
  "title": {{ product.title | json }},
  "price": {{ product.price | json }}
}
{% endcapture %}

<div
  data-vue-mount="product-card"
  data-props='{{ product_data }}'
></div>
```

## Shopify Cart API

Use the utilities in `src/utils/shopify-cart.js`:

```js
import { addToCart, getCart, updateCart } from '@utils/shopify-cart';

// Add to cart
await addToCart({ id: variantId, quantity: 1 });

// Get cart
const cart = await getCart();
```

## Scripts

- `npm run dev` - Start Vite dev server with HMR
- `npm run build` - Build production assets
- `npm run shopify:dev` - Start Shopify dev server
- `npm run shopify:push` - Push theme to Shopify
- `npm run shopify:pull` - Pull theme from Shopify
- `npm run deploy` - Build and push to Shopify

## Important Notes

- **Shopify CLI must target `/shopify`**: Always use `--path=shopify` or configure `shopify.theme.toml`
- **Tailwind prefix**: All Tailwind classes require `tw-` prefix
- **Assets folder**: Never manually edit files in `shopify/assets/` - they're auto-generated by Vite
- **Theme editor**: Vue components work in the Shopify theme editor; they reinitialize on section reload
- **JSON templates**: Fully compatible with Shopify 2.0 JSON templates and sections

## Theme Editor Compatibility

Vue components automatically reinitialize when sections are loaded/reloaded in the Shopify theme editor. The `shopify:section:load` event is handled in `src/main.js`.

## Project Structure Notes

- The `/shopify` folder is where your complete Shopify theme lives
- Vite builds `src/main.js` → `shopify/assets/main.js` and `src/styles/app.css` → `shopify/assets/main.css`
- Your theme's existing assets, sections, snippets, etc. remain in `/shopify`
- Modern dev tooling (Vite, Tailwind config, source files) live at the repo root
